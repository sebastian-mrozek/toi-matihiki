var wt=Object.defineProperty;var yt=(t,e,n)=>e in t?wt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var E=(t,e,n)=>(yt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function b(){}function dt(t){return t()}function rt(){return Object.create(null)}function B(t){t.forEach(dt)}function et(t){return typeof t=="function"}function q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function vt(t){return Object.keys(t).length===0}function bt(t){return t&&et(t.destroy)?t.destroy:b}const Ct=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;"WeakMap"in Ct;function _(t,e){t.appendChild(e)}function R(t,e,n){t.insertBefore(e,n||null)}function P(t){t.parentNode&&t.parentNode.removeChild(t)}function Et(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function ht(t){return document.createTextNode(t)}function O(){return ht(" ")}function S(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Pt(t){return Array.from(t.childNodes)}let H;function kt(){if(H===void 0){H=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{H=!0}}return H}function $t(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const o=y("iframe");o.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const i=kt();let r;return i?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=S(window,"message",s=>{s.source===o.contentWindow&&e()})):(o.src="about:blank",o.onload=()=>{r=S(o.contentWindow,"resize",e),e()}),_(t,o),()=>{(i||r&&o.contentWindow)&&r(),P(o)}}function xt(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,o,e),i}let D;function A(t){D=t}function nt(){if(!D)throw new Error("Function called outside component initialization");return D}function Ot(t){nt().$$.on_mount.push(t)}function zt(t){nt().$$.after_update.push(t)}function Z(){const t=nt();return(e,n,{cancelable:o=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=xt(e,n,{cancelable:o});return i.slice().forEach(s=>{s.call(t,r)}),!r.defaultPrevented}return!0}}const z=[],st=[];let L=[];const lt=[],St=Promise.resolve();let tt=!1;function Lt(){tt||(tt=!0,St.then(pt))}function Q(t){L.push(t)}const X=new Set;let x=0;function pt(){if(x!==0)return;const t=D;do{try{for(;x<z.length;){const e=z[x];x++,A(e),Nt(e.$$)}}catch(e){throw z.length=0,x=0,e}for(A(null),z.length=0,x=0;st.length;)st.pop()();for(let e=0;e<L.length;e+=1){const n=L[e];X.has(n)||(X.add(n),n())}L.length=0}while(z.length);for(;lt.length;)lt.pop()();tt=!1,X.clear(),A(t)}function Nt(t){if(t.fragment!==null){t.update(),B(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Q)}}function Ft(t){const e=[],n=[];L.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),L=e}const U=new Set;let Rt;function W(t,e){t&&t.i&&(U.delete(t),t.i(e))}function V(t,e,n,o){if(t&&t.o){if(U.has(t))return;U.add(t),Rt.c.push(()=>{U.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}const Tt=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...Tt];function J(t){t&&t.c()}function M(t,e,n,o){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),o||Q(()=>{const s=t.$$.on_mount.map(dt).filter(et);t.$$.on_destroy?t.$$.on_destroy.push(...s):B(s),t.$$.on_mount=[]}),r.forEach(Q)}function j(t,e){const n=t.$$;n.fragment!==null&&(Ft(n.after_update),B(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function It(t,e){t.$$.dirty[0]===-1&&(z.push(t),Lt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(t,e,n,o,i,r,s,u=[-1]){const a=D;A(t);const l=t.$$={fragment:null,ctx:[],props:r,update:b,not_equal:i,bound:rt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:rt(),dirty:u,skip_bound:!1,root:e.target||a.$$.root};s&&s(l.root);let d=!1;if(l.ctx=n?n(t,e.props||{},(c,f,...v)=>{const C=v.length?v[0]:f;return l.ctx&&i(l.ctx[c],l.ctx[c]=C)&&(!l.skip_bound&&l.bound[c]&&l.bound[c](C),d&&It(t,c)),f}):[],l.update(),d=!0,B(l.before_update),l.fragment=o?o(l.ctx):!1,e.target){if(e.hydrate){const c=Pt(e.target);l.fragment&&l.fragment.l(c),c.forEach(P)}else l.fragment&&l.fragment.c();e.intro&&W(t.$$.fragment),M(t,e.target,e.anchor,e.customElement),pt()}A(a)}class G{$destroy(){j(this,1),this.$destroy=b}$on(e,n){if(!et(n))return b;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(e){this.$$set&&!vt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const mt=t=>t%2===0,N=(t,e)=>k(Math.random()*(e-t))+t,k=t=>Math.round(t),ct=(t,e)=>{const n=N(t,e),o=N(t,e),i=N(t,e);return`rgb(${n},${o},${i})`};var F=(t=>(t.LEFT="LEFT",t.NONE="NONE",t.RIGHT="RIGHT",t))(F||{});const At=(t,e,n)=>({row:t,col:e,type:n}),Dt={rowsCount:40,colorFn:t=>mt(k(t))?"#fff":"#000"},Wt=t=>({...Dt,...t}),gt=(t,e)=>n=>mt(n)?e:t,_t=(t,e)=>{let n=[],o=t*Mt()/2-3;for(let i=1;i<e;i++){const r=N(1,(t-1)/1)*1,s=N(1,o),u=N(2,5);for(let a=0;a<u;a++){let l=F.NONE;a===0?l=F.LEFT:a===u-1&&(l=F.RIGHT);const d=At(r,s+a,l);n.push(d)}}return n},Mt=()=>{var t=window.innerWidth,e=window.innerHeight;return t/e};class jt{constructor(){E(this,"p5");E(this,"dimensions")}init(e,n){this.p5=e,this.p5.noLoop(),this.dimensions=n,this.p5.createCanvas(n.widthPx,n.heightPx),this.onInit(),this.updated()}setDimensions(e){this.dimensions=e,this.p5.resizeCanvas(e.widthPx,e.heightPx),this.updated()}onInit(){}}class Bt extends jt{constructor(){super(...arguments);E(this,"half");E(this,"full");E(this,"rowsCount");E(this,"options");E(this,"points")}onInit(){this.p5.noStroke()}paint(){this.options&&this.dimensions&&(this.drawStripes(),this.drawKorus())}updated(){this.options&&this.dimensions&&(this.rowsCount=this.options.rowsCount,this.half=k(this.dimensions.heightPx/this.rowsCount)+1,this.full=this.half*2)}setPoints(n){this.points=n}setOptions(n){this.options=n,this.updated()}drawStripes(){for(let n=0;n<this.rowsCount;n++)this.p5.fill(this.getColor(n)),this.p5.rect(0,n*this.half,this.dimensions.widthPx,this.half)}drawKorus(){this.points.forEach(n=>this.drawKoru(n))}drawKoru(n){this.clearBg(n),this.drawCircle(n)}clearBg(n){const o=n.type===F.LEFT?this.half:0,i=k(n.col)*this.full+o,r=k(n.row)*this.half,s=n.type===F.NONE?this.full:this.half,u=this.getColor(n.row+1);this.p5.fill(u),this.p5.rect(i,r,s,this.half)}drawCircle(n){const o=k(n.col)*this.full+this.half,i=k(n.row)*this.half,r=this.getColor(n.row);this.p5.fill(r),this.p5.circle(o,i,this.full)}getColor(n){return this.options.colorFn(n)}}const qt="modulepreload",Kt=function(t){return"https://sebastian-mrozek.github.io/toi-matihiko/"+t},at={},Gt=function(e,n,o){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=Kt(r),r in at)return;at[r]=!0;const s=r.endsWith(".css"),u=s?'[rel="stylesheet"]':"";if(!!o)for(let d=i.length-1;d>=0;d--){const c=i[d];if(c.href===r&&(!s||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${u}`))return;const l=document.createElement("link");if(l.rel=s?"stylesheet":qt,s||(l.as="script",l.crossOrigin=""),l.href=r,document.head.appendChild(l),s)return new Promise((d,c)=>{l.addEventListener("load",d),l.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};function Ht(t){let e,n,o;return{c(){e=y("div"),g(e,"style",t[0]),g(e,"class","m-0")},m(i,r){R(i,e,r),n||(o=bt(t[1].call(null,e)),n=!0)},p(i,[r]){r&1&&g(e,"style",i[0])},i:b,o:b,d(i){i&&P(e),n=!1,o()}}}function Ut(t,e){return e.forEach(([n,o])=>t[n]=o),t}function Qt(t,e,n){let{target:o=void 0}=e,{sketch:i=void 0}=e,{parentDivStyle:r="display: block;"}=e,{debug:s=!1}=e,u;const a=Z(),l={ref(){a("ref",o)},instance(){a("instance",u)}};function d(c){return n(2,o=c),{destroy(){n(2,o=void 0)}}}return Ot(async()=>{const c=await Gt(()=>import("./p5.min-28a2b21a.js").then(h=>h.p),[]),{default:f}=c,C=Object.entries(c).filter(([h,T])=>T instanceof Function&&h[0]!=="_"&&h!=="default");s&&console.log("available p5 native classes",C),u=new f(h=>(h=Ut(h,C),s&&console.log("p5 instance",h),window._p5Instance=h,i(h)),o),l.ref(),l.instance()}),t.$$set=c=>{"target"in c&&n(2,o=c.target),"sketch"in c&&n(3,i=c.sketch),"parentDivStyle"in c&&n(0,r=c.parentDivStyle),"debug"in c&&n(4,s=c.debug)},[r,d,o,i,s]}class Vt extends G{constructor(e){super(),K(this,e,Qt,Ht,q,{target:2,sketch:3,parentDivStyle:0,debug:4})}}function Jt(t){let e,n,o,i;return n=new Vt({props:{sketch:t[2]}}),{c(){e=y("div"),J(n.$$.fragment),g(e,"class","p5wrapper svelte-12odc5k"),Q(()=>t[4].call(e))},m(r,s){R(r,e,s),M(n,e,null),o=$t(e,t[4].bind(e)),i=!0},p:b,i(r){i||(W(n.$$.fragment,r),i=!0)},o(r){V(n.$$.fragment,r),i=!1},d(r){r&&P(e),j(n),o()}}}function Xt(t,e,n){let{painter:o}=e,i,r;const s=a=>{a.setup=()=>{const l={widthPx:i,heightPx:r};a.createCanvas(i,r),o.init(a,l)},a.windowResized=()=>{a.resizeCanvas(i,r),o.setDimensions({widthPx:i,heightPx:r})},a.draw=()=>{o.paint()}};function u(){i=this.clientWidth,r=this.clientHeight,n(0,i),n(1,r)}return t.$$set=a=>{"painter"in a&&n(3,o=a.painter)},[i,r,s,o,u]}class Yt extends G{constructor(e){super(),K(this,e,Xt,Jt,q,{painter:3})}}function Zt(t){let e,n,o;return n=new Yt({props:{painter:t[0]}}),{c(){e=y("div"),J(n.$$.fragment),g(e,"class","picture svelte-1j77ae5")},m(i,r){R(i,e,r),M(n,e,null),o=!0},p:b,i(i){o||(W(n.$$.fragment,i),o=!0)},o(i){V(n.$$.fragment,i),o=!1},d(i){i&&P(e),j(n)}}}function te(t,e,n){let{options:o}=e,{points:i}=e,r=new Bt;return zt(()=>{r.setOptions(Wt(o)),r.setPoints(i),r.paint()}),t.$$set=s=>{"options"in s&&n(1,o=s.options),"points"in s&&n(2,i=s.points)},[r,o,i]}class ee extends G{constructor(e){super(),K(this,e,te,Zt,q,{options:1,points:2})}}function ut(t,e,n){const o=t.slice();return o[9]=e[n],o}function ft(t){let e,n=t[9].label+"",o;return{c(){e=y("option"),o=ht(n),e.__value=t[9].multiplier,e.value=e.__value},m(i,r){R(i,e,r),_(e,o)},p:b,d(i){i&&P(e)}}}function ne(t){let e,n,o,i,r,s,u,a,l,d,c,f,v,C,h,T,ot,$=t[1],w=[];for(let p=0;p<$.length;p+=1)w[p]=ft(ut(t,$,p));return{c(){e=y("div"),n=y("button"),n.textContent="Randomize colors",o=O(),i=y("button"),i.textContent="Randomize points",r=O(),s=y("span"),u=y("label"),u.textContent="Size",a=O(),l=y("input"),c=O(),f=y("span"),v=y("label"),v.textContent="Quantity",C=O(),h=y("select");for(let p=0;p<w.length;p+=1)w[p].c();g(u,"for","size"),g(l,"type","number"),g(l,"id","size"),g(l,"name","number"),g(l,"min","1"),g(l,"max","8"),g(l,"step","1"),l.value=d=9-t[0].rowsCount/10,g(l,"size","2"),g(v,"for","quantity"),g(h,"id","quantity")},m(p,I){R(p,e,I),_(e,n),_(e,o),_(e,i),_(e,r),_(e,s),_(s,u),_(s,a),_(s,l),_(e,c),_(e,f),_(f,v),_(f,C),_(f,h);for(let m=0;m<w.length;m+=1)w[m]&&w[m].m(h,null);T||(ot=[S(n,"click",t[3]),S(i,"click",t[5]),S(l,"change",t[4]),S(h,"change",t[2])],T=!0)},p(p,[I]){if(I&1&&d!==(d=9-p[0].rowsCount/10)&&l.value!==d&&(l.value=d),I&2){$=p[1];let m;for(m=0;m<$.length;m+=1){const it=ut(p,$,m);w[m]?w[m].p(it,I):(w[m]=ft(it),w[m].c(),w[m].m(h,null))}for(;m<w.length;m+=1)w[m].d(1);w.length=$.length}},i:b,o:b,d(p){p&&P(e),Et(w,p),T=!1,B(ot)}}}function oe(t,e,n){let{options:o={}}=e,{multiplier:i=.5}=e;const r=Z(),s=Z();let u=[{multiplier:.5,label:"Few"},{multiplier:1,label:"Some"},{multiplier:3,label:"Lots!"}];function a(f){n(6,i=f.target.value),c()}function l(){const f=ct(150,250),v=ct(0,100);n(0,o.colorFn=gt(f,v),o),r("optionsChanged",o)}function d(f){let v=f.target.value;n(0,o.rowsCount=(9-v)*10,o),r("optionsChanged",o)}function c(){let f=_t(o.rowsCount,o.rowsCount*i);s("pointsChanged",f)}return t.$$set=f=>{"options"in f&&n(0,o=f.options),"multiplier"in f&&n(6,i=f.multiplier)},[o,u,a,l,d,c,i]}class ie extends G{constructor(e){super(),K(this,e,oe,ne,q,{options:0,multiplier:6})}}function re(t){let e,n,o,i,r;return n=new ie({props:{options:t[1]}}),n.$on("optionsChanged",t[2]),n.$on("pointsChanged",t[3]),i=new ee({props:{options:t[1],points:t[0]}}),{c(){e=y("div"),J(n.$$.fragment),o=O(),J(i.$$.fragment),g(e,"id","app"),g(e,"class","svelte-d7lzt9")},m(s,u){R(s,e,u),M(n,e,null),_(e,o),M(i,e,null),r=!0},p(s,[u]){const a={};u&2&&(a.options=s[1]),n.$set(a);const l={};u&2&&(l.options=s[1]),u&1&&(l.points=s[0]),i.$set(l)},i(s){r||(W(n.$$.fragment,s),W(i.$$.fragment,s),r=!0)},o(s){V(n.$$.fragment,s),V(i.$$.fragment,s),r=!1},d(s){s&&P(e),j(n),j(i)}}}let Y=50;function se(t,e,n){let o=_t(Y,Y*.5),i={rowsCount:Y,colorFn:gt("#101010","#e0e0e0")};return[o,i,u=>{n(1,i={...i,...u.detail})},u=>{n(0,o=[...u.detail])}]}class le extends G{constructor(e){super(),K(this,e,se,re,q,{})}}new le({target:document.getElementById("app")});
